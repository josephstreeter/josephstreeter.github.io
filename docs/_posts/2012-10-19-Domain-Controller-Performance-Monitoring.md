---
title:  Domain Controller Performance Monitoring
date:   2012-10-19 00:00:00 -0500
categories: IT
---

These are some counters to check in PerfMon against your Active Directory Domain Controllers. These counters should be checked in addition to the usual CPU, memory, networking, etc. counters.

---

## NTDS Counters

### Directory Services

**DS Threads In Use:** This counter shows the number of threads in use by Active Directory, with a lack of activity typically pointing to network problems that are preventing client requests from succeeding.

**Kerberos Authentications/Sec:** This counter shows the number of Kerberos authentications on the server per second. A lack of activity can indicate network problems that are preventing authentication requests from succeeding.

**NTLM Authentications:** This counter shows the number of NTLM authentications per second handled by the domain controller (from Windows 98 and Windows NT clients). A lack of activity points to network problems.

## LDAP

**LDAP Bind Time:** This counter shows the time required for completion of the last LDAP binding, with a higher value pointing to either hardware or network performance problems.

**LDAP Client Sessions:** This counter shows the number of connected LDAP client sessions, with a lack of activity pointing to network problems.

**LDAP Searches/Sec:** This counter shows the number of LDAP searches per second performed by clients in the directory. A lack of activity points to network problems.

**LDAP Successful Binds/Sec:** This counter shows the number of successful LDAP binds per second, with a lack of activity pointing to network problems.

## Replication

**DRA Inbound Bytes Total/Sec:** This counter shows total bytes received through replication per second. Lack of activity indicates that the network is slowing down replication.

**DRA Inbound Object Updates Remaining in Packet:** This counter shows the number of object updates received for replication that have not yet been applied to the local server. The value should be low, with a higher value indicating that the hardware is incapable of adequately servicing replication (warranting a server upgrade).

**DRA Outbound Bytes Total/Sec:** This counter shows the total bytes sent per second. Lack of activity indicates that the hardware or network is slowing down replication.

**DRA Pending Replication Synchronizations:** This counter indicates the replication backlog on the server. This value should be low, with a higher value indicating that the hardware is not adequately servicing replication.

---

### Database Counters

**Cache % Hit:** This counter shows the percentage of database page requests handled by the cache, thereby not causing a file I/O. A lack of activity can indicate that the server has insufficient physical memory.

**Cache Page Fault Stalls/Sec:** This counter shows the number of page faults per second that go unserviced due to lack of available pages in the database cache. A value other than zero indicates insufficient physical memory in the server.

**Cache Page Faults/Sec:** This counter shows the number of page requests per second that cause the database cache to allocate new pages from the cache. This value should be low, with a higher value indicating insufficient physical memory in the server.

**File Operations Pending:** This counter shows the number of file operations for the database file(s) currently pending by the operating system. The value should be low, with a higher value indicating insufficient physical memory and/or inadequate CPU availability or performance.

**File Operations/Sec:** This counter shows the number of file operations per second generated by the database cache manager against the database files. The value should be low, with a higher value indicating inadequate physical memory in the server.

**Log Record Stalls/Sec:**This counter shows the number of log records per second that could not be added to the log buffers because the buffers were full. The value should be zero or close to zero, with a higher value indicating inadequate physical memory in the server.

**Log Threads Waiting:** This counter indicates the number of threads waiting on pending log writes. The value should be low, with a higher value indicating insufficient physical memory, poor disk performance, or poor disk structuring.

**Table Open Cache Hits/Sec:** This counter shows the number of directory database tables open per second from the cache. A high value indicates better caching, with a lower value typically indicating inadequate physical memory in the server.
